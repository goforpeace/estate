{
  "entities": {
    "Tenant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tenant",
      "type": "object",
      "description": "Represents a tenant in the real estate management system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Tenant entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the tenant."
        },
        "domain": {
          "type": "string",
          "description": "The domain associated with the tenant."
        },
        "enabled": {
          "type": "boolean",
          "description": "Indicates whether the tenant account is enabled."
        },
        "contactName": {
          "type": "string",
          "description": "The name of the contact person for the tenant."
        },
        "contactEmail": {
          "type": "string",
          "description": "The email of the contact person for the tenant.",
          "format": "email"
        },
        "contactPhone": {
          "type": "string",
          "description": "The phone number of the contact person for the tenant."
        },
        "noticeMessage": {
          "type": "string",
          "description": "A specific notice message for this tenant, shown as a pop-up on login."
        },
        "noticeActive": {
          "type": "boolean",
          "description": "Whether the tenant-specific notice is active."
        },
        "noticeLocked": {
          "type": "boolean",
          "description": "If true, the tenant cannot close the notice pop-up for a period."
        }
      },
      "required": [
        "id",
        "name",
        "domain",
        "enabled"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user within a tenant's organization.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. (Relationship: Tenant 1:N User)"
        },
        "name": {
          "type": "string",
          "description": "The full name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the user."
        }
      },
      "required": [
        "id",
        "tenantId",
        "name",
        "email"
      ]
    },
    "Project": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Project",
      "type": "object",
      "description": "Represents a real estate project.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Project entity."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. (Relationship: Tenant 1:N Project)"
        },
        "name": {
          "type": "string",
          "description": "The name of the project."
        },
        "location": {
          "type": "string",
          "description": "The location of the project."
        },
        "targetSell": {
          "type": "number",
          "description": "The target selling price of the project."
        },
        "status": {
          "type": "string",
          "description": "The status of the project (Ongoing, Upcoming, Completed)."
        },
        "expectedHandoverDate": {
          "type": "string",
          "description": "The expected handover date of the project.",
          "format": "date-time"
        },
        "flats": {
          "type": "array",
          "description": "A list of flats within the project.",
          "items": {
            "$ref": "#/entities/Flat"
          }
        }
      },
      "required": [
        "id",
        "tenantId",
        "name",
        "location",
        "targetSell",
        "status",
        "expectedHandoverDate",
        "flats"
      ]
    },
    "Flat": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Flat",
      "type": "object",
      "description": "Represents a flat within a project. Can be a sub-collection or embedded.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name/identifier of the flat (e.g., 2A, 3A)."
        },
        "sizeSft": {
          "type": "number",
          "description": "The size of the flat in square feet."
        }
      },
      "required": [
        "name",
        "sizeSft"
      ]
    },
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Customer entity."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. (Relationship: Tenant 1:N Customer)"
        },
        "name": {
          "type": "string",
          "description": "The name of the customer."
        },
        "phoneNumber": {
          "type": "string",
          "description": "The phone number of the customer."
        },
        "address": {
          "type": "string",
          "description": "The address of the customer."
        },
        "nid": {
          "type": "string",
          "description": "The National ID of the customer."
        }
      },
      "required": [
        "id",
        "tenantId",
        "name",
        "phoneNumber",
        "address"
      ]
    },
    "FlatSale": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FlatSale",
      "type": "object",
      "description": "Represents the sale of a flat to a customer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the FlatSale entity."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to Project. (Relationship: Project 1:N FlatSale)"
        },
        "flatName": {
          "type": "string",
          "description": "The name of the flat sold (denormalized for querying)."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to Customer. (Relationship: Customer 1:N FlatSale)"
        },
        "amount": {
          "type": "number",
          "description": "The total amount of the flat sale."
        },
        "perSftPrice": {
          "type": "number",
          "description": "The price per square foot."
        },
        "parkingPrice": {
          "type": "number",
          "description": "The price of parking."
        },
        "utilityCost": {
          "type": "number",
          "description": "The utility cost."
        },
        "note": {
          "type": "string",
          "description": "Additional notes about the sale."
        },
        "deedLink": {
          "type": "string",
          "description": "Link to the deed document.",
          "format": "uri"
        },
        "bookingMoney": {
          "type": "number",
          "description": "The amount of booking money."
        },
        "monthlyInstallment": {
          "type": "number",
          "description": "The amount of monthly installment."
        },
        "additionalCosts": {
          "type": "array",
          "description": "A list of additional costs for modifications or other charges.",
          "items": {
            "type": "object",
            "properties": {
              "description": {
                "type": "string",
                "description": "Description of the additional cost."
              },
              "price": {
                "type": "number",
                "description": "The price of the additional cost."
              }
            },
            "required": [
              "description",
              "price"
            ]
          }
        }
      },
      "required": [
        "id",
        "projectId",
        "flatName",
        "customerId",
        "amount",
        "perSftPrice"
      ]
    },
    "Payment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Payment",
      "type": "object",
      "description": "Represents a payment made for a flat sale.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Payment entity."
        },
        "tenantId": {
          "type": "string",
          "description": "Denormalized tenant ID for collection group queries."
        },
        "flatSaleId": {
          "type": "string",
          "description": "Reference to FlatSale. (Relationship: FlatSale 1:N Payment)"
        },
        "amount": {
          "type": "number",
          "description": "The amount of the payment."
        },
        "type": {
          "type": "string",
          "description": "The type of payment.",
          "enum": [
            "Cash",
            "Cheque",
            "Bank Transfer"
          ]
        },
        "paymentFor": {
          "type": "string",
          "description": "The purpose of the payment (e.g., Booking Money, Installment, or an additional cost)."
        },
        "reference": {
          "type": "string",
          "description": "The payment reference number (e.g., cheque number, transaction ID)."
        },
        "paymentDate": {
          "type": "string",
          "description": "The date of the payment.",
          "format": "date"
        }
      },
      "required": [
        "id",
        "tenantId",
        "flatSaleId",
        "amount",
        "type",
        "paymentDate",
        "paymentFor"
      ]
    },
    "Organization": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Organization",
      "type": "object",
      "description": "Represents the organization's information for receipt generation.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Organization entity. Only one per tenant."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. (Relationship: Tenant 1:1 Organization)"
        },
        "logoUrl": {
          "type": "string",
          "description": "Link to the organization's logo image.",
          "format": "uri"
        },
        "name": {
          "type": "string",
          "description": "The name of the company."
        },
        "website": {
          "type": "string",
          "description": "The website of the company.",
          "format": "uri"
        },
        "address": {
          "type": "string",
          "description": "The address of the company."
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the company."
        },
        "email": {
          "type": "string",
          "description": "The email address of the company.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "tenantId",
        "name",
        "address",
        "phone",
        "email"
      ]
    },
    "InflowTransaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "InflowTransaction",
      "type": "object",
      "description": "Represents an inflow transaction, such as a payment.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the transaction."
        },
        "receiptId": {
          "type": "string",
          "description": "The sequential and unique receipt ID."
        },
        "customerId": {
          "type": "string",
          "description": "Reference to the Customer."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to the Project."
        },
        "flatName": {
          "type": "string",
          "description": "The identifier of the flat."
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "The date of the transaction."
        },
        "amount": {
          "type": "number",
          "description": "The amount of the transaction."
        },
        "paymentMethod": {
          "type": "string",
          "description": "The payment method used."
        },
        "paymentType": {
          "type": "string",
          "description": "The type of payment (e.g., booking, installment)."
        },
        "bankName": {
          "type": "string",
          "description": "The name of the bank, if applicable."
        },
        "chequeNo": {
          "type": "string",
          "description": "The cheque number, if applicable."
        },
        "chequeDate": {
          "type": "string",
          "format": "date",
          "description": "The date of the cheque, if applicable."
        },
        "note": {
          "type": "string",
          "description": "Additional notes for the transaction."
        }
      },
      "required": [
        "id",
        "receiptId",
        "customerId",
        "projectId",
        "flatName",
        "date",
        "amount",
        "paymentMethod",
        "paymentType"
      ]
    },
    "Vendor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Vendor",
      "type": "object",
      "description": "Represents a vendor or supplier.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Vendor entity."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to Tenant. (Relationship: Tenant 1:N Vendor)"
        },
        "name": {
          "type": "string",
          "description": "The name of the vendor contact person."
        },
        "phoneNumber": {
          "type": "string",
          "description": "The phone number of the vendor."
        },
        "enterpriseName": {
          "type": "string",
          "description": "The name of the vendor's company or enterprise."
        },
        "details": {
          "type": "string",
          "description": "Additional details about the vendor."
        }
      },
      "required": [
        "id",
        "tenantId",
        "name",
        "phoneNumber",
        "enterpriseName"
      ]
    },
    "OutflowTransaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OutflowTransaction",
      "type": "object",
      "description": "Represents an outflow transaction, such as an expense.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the transaction."
        },
        "tenantId": {
          "type": "string",
          "description": "Denormalized tenant ID."
        },
        "projectId": {
          "type": "string",
          "description": "Reference to the Project."
        },
        "vendorId": {
          "type": "string",
          "description": "Reference to the Vendor."
        },
        "expenseCategoryName": {
          "type": "string",
          "description": "The name of the expense category."
        },
        "qty": {
          "type": "number",
          "description": "The quantity of the item/service."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the expense."
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "The date of the transaction."
        },
        "amount": {
          "type": "number",
          "description": "The total amount of the expense."
        },
        "reference": {
          "type": "string",
          "description": "A reference number for the transaction (e.g., invoice number)."
        },
        "status": {
          "type": "string",
          "description": "The payment status of the expense.",
          "enum": [
            "Unpaid",
            "Partially Paid",
            "Paid"
          ]
        },
        "paidAmount": {
          "type": "number",
          "description": "The total amount paid against this expense."
        }
      },
      "required": [
        "id",
        "tenantId",
        "projectId",
        "vendorId",
        "expenseCategoryName",
        "date",
        "amount",
        "status",
        "paidAmount"
      ]
    },
    "ExpenseCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ExpenseCategory",
      "type": "object",
      "description": "Represents a category for expenses.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the category."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to the Tenant."
        },
        "name": {
          "type": "string",
          "description": "The name of the expense category."
        }
      },
      "required": [
        "id",
        "tenantId",
        "name"
      ]
    },
    "ExpensePayment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ExpensePayment",
      "type": "object",
      "description": "Represents a payment made towards an outflow transaction (expense).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the payment."
        },
        "tenantId": {
          "type": "string",
          "description": "Denormalized tenant ID."
        },
        "outflowTransactionId": {
          "type": "string",
          "description": "Reference to the OutflowTransaction."
        },
        "vendorId": {
          "type": "string",
          "description": "Denormalized reference to the Vendor."
        },
        "projectId": {
          "type": "string",
          "description": "Denormalized reference to the Project."
        },
        "expenseCategoryName": {
          "type": "string",
          "description": "Denormalized name of the expense category."
        },
        "amount": {
          "type": "number",
          "description": "The amount paid in this transaction."
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "The date of the payment."
        },
        "note": {
          "type": "string",
          "description": "Optional notes about the payment."
        },
        "reference": {
          "type": "string",
          "description": "Optional payment reference (e.g., transaction ID, cheque number)."
        }
      },
      "required": [
        "id",
        "tenantId",
        "outflowTransactionId",
        "vendorId",
        "projectId",
        "expenseCategoryName",
        "amount",
        "date"
      ]
    },
    "OperatingCost": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OperatingCost",
      "type": "object",
      "description": "Represents a general operating cost for the business, not tied to a specific project.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the OperatingCost entity."
        },
        "tenantId": {
          "type": "string",
          "description": "Denormalized tenant ID."
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "The date the cost was incurred."
        },
        "itemName": {
          "type": "string",
          "description": "The name of the item or category of the cost."
        },
        "amount": {
          "type": "number",
          "description": "The amount of the cost."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the cost."
        },
        "reference": {
          "type": "string",
          "description": "A reference number for the transaction (e.g., invoice number)."
        }
      },
      "required": [
        "id",
        "tenantId",
        "date",
        "itemName",
        "amount"
      ]
    },
    "OperatingCostItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OperatingCostItem",
      "type": "object",
      "description": "Represents a category/item for operating costs.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the item."
        },
        "tenantId": {
          "type": "string",
          "description": "Reference to the Tenant."
        },
        "name": {
          "type": "string",
          "description": "The name of the operating cost item/category."
        }
      },
      "required": [
        "id",
        "tenantId",
        "name"
      ]
    },
    "Notice": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Notice",
      "type": "object",
      "description": "Represents a global notice for all tenants.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Notice entity."
        },
        "message": {
          "type": "string",
          "description": "The content of the notice."
        },
        "isActive": {
          "type": "boolean",
          "description": "Whether the notice is currently active and should be displayed."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the notice was created."
        }
      },
      "required": [
        "id",
        "message",
        "isActive",
        "createdAt"
      ]
    },
    "GlobalBranding": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GlobalBranding",
      "type": "object",
      "description": "Stores global branding settings like the login page image.",
      "properties": {
        "id": {
          "type": "string",
          "description": "A fixed ID for the settings document, e.g., 'login'."
        },
        "loginImageUrl": {
          "type": "string",
          "description": "URL for the global login page background image.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "loginImageUrl"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/tenants/{tenantId}",
        "definition": {
          "entityName": "Tenant",
          "schema": {
            "$ref": "#/backend/entities/Tenant"
          },
          "description": "Stores tenant information. Used for managing tenant accounts and access.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            }
          ]
        }
      },
      {
        "path": "/counters/receipt",
        "definition": {
          "entityName": "Counter",
          "description": "A special document to keep track of sequential receipt IDs.",
          "schema": {
            "type": "object",
            "properties": {
              "lastId": {
                "type": "number"
              }
            }
          }
        }
      },
      {
        "path": "/tenants/{tenantId}/projects/{projectId}",
        "definition": {
          "entityName": "Project",
          "schema": {
            "$ref": "#/backend/entities/Project"
          },
          "description": "Stores project details. Includes denormalized 'tenantId' for authorization independence.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "projectId",
              "description": "Unique identifier for the project."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/projects/{projectId}/inflowTransactions/{transactionId}",
        "definition": {
          "entityName": "InflowTransaction",
          "schema": {
            "$ref": "#/backend/entities/InflowTransaction"
          },
          "description": "Stores payment information as a subcollection of the project.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "projectId",
              "description": "Unique identifier for the project."
            },
            {
              "name": "transactionId",
              "description": "Unique identifier for the transaction."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/customers/{customerId}",
        "definition": {
          "entityName": "Customer",
          "schema": {
            "$ref": "#/backend/entities/Customer"
          },
          "description": "Stores customer information. Includes denormalized 'tenantId' for authorization independence.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "customerId",
              "description": "Unique identifier for the customer."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/vendors/{vendorId}",
        "definition": {
          "entityName": "Vendor",
          "schema": {
            "$ref": "#/backend/entities/Vendor"
          },
          "description": "Stores vendor information. Includes denormalized 'tenantId' for authorization independence.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "vendorId",
              "description": "Unique identifier for the vendor."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/flatSales/{flatSaleId}",
        "definition": {
          "entityName": "FlatSale",
          "schema": {
            "$ref": "#/backend/entities/FlatSale"
          },
          "description": "Stores flat sale information. Includes denormalized 'tenantId', 'projectId', and 'customerId' for authorization independence and simplified querying.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "flatSaleId",
              "description": "Unique identifier for the flat sale."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/flatSales/{flatSaleId}/payments/{paymentId}",
        "definition": {
          "entityName": "Payment",
          "schema": {
            "$ref": "#/backend/entities/Payment"
          },
          "description": "Stores payment information as a subcollection of the flat sale. Includes denormalized 'tenantId' and 'flatSaleId' for authorization independence.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "flatSaleId",
              "description": "Unique identifier for the flat sale."
            },
            {
              "name": "paymentId",
              "description": "Unique identifier for the payment."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/organization/{organizationId}",
        "definition": {
          "entityName": "Organization",
          "schema": {
            "$ref": "#/backend/entities/Organization"
          },
          "description": "Stores organization information. This is a single document per tenant, so a fixed document ID can be used.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "organizationId",
              "description": "A fixed unique identifier for the organization document, e.g., 'details'."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/outflowTransactions/{transactionId}",
        "definition": {
          "entityName": "OutflowTransaction",
          "schema": {
            "$ref": "#/backend/entities/OutflowTransaction"
          },
          "description": "Stores expense transaction information for a tenant.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "transactionId",
              "description": "Unique identifier for the outflow transaction."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/outflowTransactions/{transactionId}/expensePayments/{paymentId}",
        "definition": {
          "entityName": "ExpensePayment",
          "schema": {
            "$ref": "#/entities/ExpensePayment"
          },
          "description": "Stores individual payments made against a single expense.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "transactionId",
              "description": "Unique identifier for the outflow transaction."
            },
            {
              "name": "paymentId",
              "description": "Unique identifier for the expense payment."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/expenseCategories/{categoryId}",
        "definition": {
          "entityName": "ExpenseCategory",
          "schema": {
            "$ref": "#/backend/entities/ExpenseCategory"
          },
          "description": "Stores expense categories for a tenant.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "categoryId",
              "description": "Unique identifier for the expense category."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/operatingCosts/{costId}",
        "definition": {
          "entityName": "OperatingCost",
          "schema": {
            "$ref": "#/backend/entities/OperatingCost"
          },
          "description": "Stores general operating costs for a tenant.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "costId",
              "description": "Unique identifier for the operating cost."
            }
          ]
        }
      },
      {
        "path": "/tenants/{tenantId}/operatingCostItems/{itemId}",
        "definition": {
          "entityName": "OperatingCostItem",
          "schema": {
            "$ref": "#/backend/entities/OperatingCostItem"
          },
          "description": "Stores item categories for operating costs.",
          "params": [
            {
              "name": "tenantId",
              "description": "Unique identifier for the tenant."
            },
            {
              "name": "itemId",
              "description": "Unique identifier for the operating cost item."
            }
          ]
        }
      },
      {
        "path": "/notices/{noticeId}",
        "definition": {
          "entityName": "Notice",
          "schema": {
            "$ref": "#/backend/entities/Notice"
          },
          "description": "Stores global notices to be displayed to all tenants.",
          "params": [
            {
              "name": "noticeId",
              "description": "Unique identifier for the notice."
            }
          ]
        }
      },
      {
        "path": "/globalSettings/{settingId}",
        "definition": {
          "entityName": "GlobalBranding",
          "schema": {
            "$ref": "#/backend/entities/GlobalBranding"
          },
          "description": "Stores global application settings. A single document with a fixed ID like 'loginBranding' will be used.",
          "params": [
            {
              "name": "settingId",
              "description": "A fixed unique identifier for the setting document, e.g., 'loginBranding'."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support a multi-tenant real estate management SaaS application, focusing on authorization independence, scalability, and clear security rules.  Tenants are isolated from each other using a top-level `tenants` collection. Each tenant owns projects, customers, flat sales, payments and organization data. This design enables efficient querying and avoids complex rule logic. Each tenant has its own set of users managed via Firebase Authentication.\n\nAuthorization Independence: Achieved by storing the `tenantId` within each document that belongs to a tenant (Projects, Customers, FlatSales, Payments, Organization). This eliminates the need for `get()` calls in security rules to verify tenant ownership, thus improving performance and simplifying rule complexity. FlatSales also store `projectId` and `customerId` to simplify queries and avoid expensive collection group queries where possible.\n\nQAPs Support:\n*   Secure List Operations: Path-based ownership (/tenants/{tenantId}/projects/{projectId}) and root collections with tenantId fields enable secure listing of resources within a tenant's scope.\n*   Tenant Isolation: The structure inherently isolates data between tenants, preventing unauthorized access.\n*   Role-Based Access Control (Future Enhancement): While the current design uses path-based ownership, a membership map (`members: {uid: role}`) could be added to Project or other collections for collaborative access within a tenant, if required in the future."
  }
}
